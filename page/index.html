<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="icon" type="image/png" href="assets/img/favicon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	
	<title>MyPage by Momsim</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/hipster_cards.css" rel="stylesheet"/> 
        
    <!--     Fonts and icons     -->
    <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />  
    <link href='http://fonts.googleapis.com/css?family=Playfair+Display|Raleway:700,100,400|Roboto:400,700|Playfair+Display+SC:400,700' rel='stylesheet' type='text/css'>
    <script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <style>
        .card{
            margin-bottom: 70px;
        }
        body{
            background: url('http://demos.creative-tim.com/hipster-as-f-cards/presentation-assets/img/bg.jpg');
        }
    </style>
</head>
<body>

<div class="wrapper"  ng-app = "mainApp" ng-controller = "studentController">       
    <div class="container">     
        <div class="page-description page-description-header">
            <div class="hipster-container">
                MyPage
                <select name="repeatSelect" id="repeatSelect" ng-model="pageid">
                  <option ng-repeat="option in mypages" value="{{option.id}}">{{option.name}}</option>
                </select>
                <input type="button" name="" ng-click="openthispage(pageid)" value="Check This">
            </div>
        </div>   
        
        <div class="masonry-container">
                        
            <div class="card-box col-md-4 col-sm-6" ng-repeat = "post in mypage">               
                <div class="card card-with-border" ng-if="$index!=3 && post.type!='video'" data-background="image" data-src="assets/img/fashion-1.jpg" ng-style="{'background-image': 'url('+post.attachments.data[0].media.image.src+')','background-size': 'cover','background-position': 'center'}">
                    <div class="header">
                    </div>
                    
                    <div class="content text-center">
                        <p class="description">{{post.message}}</p>
                    </div>                            
                    <div class="footer text-center">
                         <a href="{{post.attachments.data[0].url}}" target="_blank" class="btn btn-danger btn-fill btn-round">Read article</a>
                    </div>
                    <div class="filter"></div>
                </div> <!-- end card -->

                <div class="card" ng-if="$index==3">                            
                    <div class="header"  ng-style="{'background-image': 'url('+post.attachments.data[0].media.image.src+')','background-size': 'cover'}">
                        <img src="{{post.attachments.data[0].media.image.src}}"/>
                        <div class="filter"></div>
                        
                        <div class="actions">
                            <button class="btn btn-round btn-fill btn-neutral btn-modern">
                                Read Post
                            </button>
                        </div>
                    </div>
                    
                    <div class="content">
                        <h6 class="category">Post</h6>
                        <h4 class="title"><a href="#">Try the new hairstyle from this Barber Shop </a></h4>
                        <p class="description">{{post.message}}</p>
                    </div>                                           
                </div> <!-- end card -->

                <div class="card" ng-if="post.type=='video'" data-background="color" data-color="black">                            
                    <div class="fb-video" data-href={{post.attachments.data[0].url}}  data-show-text="false"> <div class = "fb-xfbml-parse-ignore"></div> </div>
                    
                    <div class="content">
                        <h6 class="category">Video</h6>
                        <!-- <h4 class="title"><a href="#">Hipster Apartment sold for $1.2 mil.</a></h4> -->
                        <p class="description">{{post.message}}</p>
                    </div>                                           
                </div> <!-- end card -->
            </div>
                                       
        </div>
        
    </div> 
</div> <!-- end wrapper -->

</body>

    <script src="assets/js/jquery-1.10.2.js" type="text/javascript"></script>
	<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="assets/js/hipster-cards.js"></script>
	
	<!--  Just for demo	 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/3.3.1/masonry.pkgd.min.js"></script>
    <script></script>
	<script>
    	
    	$().ready(function(){
        	
        	var $container = $('.masonry-container');

            doc_width = $(document).width();
            
            if (doc_width >= 768){
                $container.masonry({
                    itemSelector        : '.card-box',
                    columnWidth         : '.card-box',
                    transitionDuration  : 0
                });   
            } else {
                $('.mas-container').removeClass('mas-container').addClass('row');
            }            
    	});
	</script>
	
    <script>
         var mainApp = angular.module("mainApp", []);
         
         mainApp.controller('studentController', function($scope,$http) {
            var randompage = Math.floor((Math.random() * 10) + 1);
            //$scope.mypage = {"message":"Mischief managed.","created_time":"2017-10-21T16:00:00+0000","id":"156794164312_10155806993049313"};
            const proxyurl = "https://cors-anywhere.herokuapp.com/";
            $scope.pageid = '506921692718847';
            

            var pagesurl = "http://momsim.in:8080/mylikes";
            $http.get(proxyurl+pagesurl).then( function(response) {
                $scope.mypages = response.data.likes.data;
                console.log('Mypages',$scope.mypages);
                var url = "http://www.momsim.in:8080/feeds/"+$scope.mypages[randompage].id;
                $scope.pageid = $scope.mypages[randompage].id;
                $http.get(proxyurl+url).then( function(response) {
                    $scope.mypage = response.data.data;
                    console.log('page',$scope.mypage[14].attachments.data[0].url);
                    (function(d, s, id) {
                      var js, fjs = d.getElementsByTagName(s)[0];
                      if (d.getElementById(id)) return;
                      js = d.createElement(s); js.id = id;
                      js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.11&appId=866100573474781';
                      fjs.parentNode.insertBefore(js, fjs);
                    }(document, 'script', 'facebook-jssdk'));
                });
            });
            $scope.openthispage = function(pageid){
                url = "http://www.momsim.in:8080/feeds/"+pageid;
                $http.get(proxyurl+url).then( function(response) {
                   $scope.mypage = response.data.data;
                   console.log('Page call',$scope.mypage);
                   //FB.XFBML.parse();
                });
            }
         });
      </script>
</html>